<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd">
	<sub-flow name="sys-business-central-api-create-dimension-subflow" doc:id="a321c5cf-03e3-4a61-be9c-ffde811df7bc" >
		<logger level="INFO" doc:name="START - Create Dimension" doc:id="eada82da-dc6b-41c7-96bf-550e41822a93" message="START - Create Dimension | Payload: #[payload]" category="${app.log.category}"/>
		<until-successful maxRetries="${retry.attempt.max}" doc:name="Until Successful" doc:id="bc46dbc2-2e37-4ebb-bfe7-2c1f9c3c949c" millisBetweenRetries="${retry.attempt.wait}">
			<try doc:name="Try" doc:id="8037f1b1-c617-4bf6-ad6c-dafec602b3c4">
			<http:request method="POST" doc:name="POST /sys-business-central-api/dimension" doc:id="b86aa948-a183-4495-aeb4-1a5a8da2c128" config-ref="HTTP_Request_configuration_sys-business-central-api" path="${sys.bc.path.dimension}" sendCorrelationId="ALWAYS">
				<http:headers><![CDATA[#[output application/java
---
{
	"client-id" : p('sys.bc.client.id'),
	"client-secret" : p('sys.bc.client.secret'),
	"Content-Type": "application/json",
	"company": p('sys.bc.company.header')
}]]]></http:headers>
		</http:request>
			<error-handler ref="system-error-handler" />
		</try>
		</until-successful>
		<flow-ref doc:name="error-handling-validate-errors" doc:id="a4bef771-50d7-4673-b41f-ceb8718a4e2f" name="error-handling-validate-errors" />
		<logger level="DEBUG" doc:name="DEBUG - Create Dimension" doc:id="8f1954fe-c57f-478f-9bed-ac370be2ddc6" message="DEBUG - Create Dimension Response: #[payload]" category="${app.log.category}" />
		<logger level="INFO" doc:name="END - Create Dimension" doc:id="1ddac0b4-5fc4-461b-bc32-2192371363b6" category="${app.log.category}" message="END - Create Dimension | Success | System ID: #[payload.data.systemId]"/>
	</sub-flow>
	<sub-flow name="sys-business-central-api-get-dimension-subflow" doc:id="d7d95f39-5432-4d34-8718-6f8c1989e376" >
		<logger level="INFO" doc:name="START - Get Dimension" doc:id="24ff1703-aff8-4607-8414-83c7431a4be0" category="${app.log.category}" message="START - Get Dimension | Query Params: #[vars.bcQueryParams]"/>
		<until-successful maxRetries="${retry.attempt.max}" doc:name="Until Succesful" doc:id="3c4751c5-2268-4810-aebf-c3ab7734aca5" millisBetweenRetries="${retry.attempt.wait}">
		<try doc:name="Try" doc:id="0d6f4bc0-79fb-4db0-9031-c772a8f84e4c">
			<http:request method="GET" doc:name="GET /sys-business-central-api/dimension" doc:id="b48635ed-9687-46d9-9dcf-14f9792fa722" config-ref="HTTP_Request_configuration_sys-business-central-api" path="${sys.bc.path.dimension}" sendCorrelationId="ALWAYS">
			<http:headers><![CDATA[#[output application/java
---
{
	"client-id" : p('sys.bc.client.id'),
	"client-secret" : p('sys.bc.client.secret'),
	"Content-Type": "application/json",
	"company": p('sys.bc.company.header')
}]]]></http:headers>
					<http:query-params ><![CDATA[#[(vars.bcQueryParams)]]]></http:query-params>
		</http:request>
			<error-handler ref="system-error-handler" />
		</try>
		</until-successful>
		<flow-ref doc:name="error-handling-validate-errors" doc:id="d17b7119-f422-4b4e-804a-009c072d5b06" name="error-handling-validate-errors" />
		<logger level="DEBUG" doc:name="DEBUG - Get Dimension Result" doc:id="d64a0bc7-4855-4780-878a-9da7673eed14" message="DEBUG - Get Dimension Result : #[payload]" category="${app.log.category}" />
		<logger level="INFO" doc:name="END - Get Dimension" doc:id="73ad7272-0a91-4d34-92fb-443860964e2e" category="${app.log.category}" message="END - Get Dimension | Result Count: #[sizeOf(payload.data)]"/>
	</sub-flow>
	<sub-flow name="sys-business-central-api-update-dimension-subflow" doc:id="a7adf576-e63a-4926-a731-aae0e2ec0ab2" >
		<logger level="INFO" doc:name="START - Update Dimension" doc:id="faebbed2-6164-457f-96f6-72349ffae04e" message="START - Update Dimension | Payload: #[payload] | System ID: #[vars.uriParams]" category="${app.log.category}"/>
		<until-successful maxRetries="${retry.attempt.max}" doc:name="Until Successful" doc:id="3f65d9c4-6d81-467c-ad27-8287d6ba13a6" millisBetweenRetries="${retry.attempt.wait}">
			<try doc:name="Try" doc:id="623b1027-a8fa-489c-bb4d-27da23517184">
			<http:request method="PATCH" doc:name="PATCH /sys-business-central-api/dimension" doc:id="b325774a-b253-4927-8530-e546fdb24066" config-ref="HTTP_Request_configuration_sys-business-central-api" path="${sys.bc.path.dimension.update}" sendCorrelationId="ALWAYS">
			<http:headers><![CDATA[#[output application/java
---
{
	"client-id" : p('sys.bc.client.id'),
	"client-secret" : p('sys.bc.client.secret'),
	"Content-Type": "application/json",
	"company": p('sys.bc.company.header')
}]]]></http:headers>
				<http:uri-params ><![CDATA[#[vars.uriParams]]]></http:uri-params>
		</http:request>
			<error-handler ref="system-error-handler" />
		</try>
		</until-successful>
		<flow-ref doc:name="error-handling-validate-errors" doc:id="7b2377f5-7f9c-429a-af00-5f92825ead6c" name="error-handling-validate-errors" />
		<logger level="DEBUG" doc:name="DEBUG - Update Dimension" doc:id="f5ee808e-19c9-4053-a855-91f4d7e81a99" message="DEBUG - Update Dimension Response: #[payload]" category="${app.log.category}" />
		<logger level="INFO" doc:name="END - Update Dimension" doc:id="b6fd46e4-b008-47ea-990f-220fa0196d25" message="END - Update Dimension | Success | System ID: #[vars.uriParams]" category="${app.log.category}" />
	</sub-flow>
	<sub-flow name="sys-business-central-api-rename-dimension-subflow" doc:id="a6bd0771-1795-4663-af6a-4a4296bbe08f" >
		<logger level="INFO" doc:name="START - Rename Dimension" doc:id="6a0abcb2-f77b-4c1b-b306-40963d01f78f" message="START - Rename Dimension | Payload: #[payload]" category="${app.log.category}"/>
		<until-successful maxRetries="${retry.attempt.max}" doc:name="Until Successful" doc:id="fd648f91-5926-4374-bbb9-fcdc6805977e" millisBetweenRetries="${retry.attempt.wait}">
			<try doc:name="Try" doc:id="11439964-c25e-4959-a228-d568823b5c1a">
			<http:request method="GET" doc:name="RENAME /sys-business-central-api/dimension" doc:id="65467c4c-f232-46e0-be63-9a887f5db1fd" config-ref="HTTP_Request_configuration_sys-business-central-api" path="${sys.bc.path.dimension.rename}" />
			<error-handler ref="system-error-handler" />
		</try>
		</until-successful>
		<flow-ref doc:name="error-handling-validate-errors" doc:id="a4d07e89-75c4-4051-8503-b13e100337a4" name="error-handling-validate-errors"/>
		<logger level="DEBUG" doc:name="DEBUG - Rename Dimension " doc:id="700653a5-85df-4c75-ad2c-de8b240f6365" message="DEBUG - Rename Dimension Response: #[payload]" category="${app.log.category}"/>
		<logger level="INFO" doc:name="END - Rename Dimension" doc:id="fe4d9215-0750-4a71-83e1-d59e96a67a11" message="END - Rename Dimension | Success | System ID: #[payload.data.systemId]" category="${app.log.category}"/>
	</sub-flow>
</mule>
