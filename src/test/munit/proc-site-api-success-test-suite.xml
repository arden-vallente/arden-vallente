<?xml version="1.0" encoding="UTF-8" standalone="no"?><mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="   http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd   http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd   http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="proc-site-api-success-test-suite.xml"/>
	<munit:test description="Updating a dimension from site" doc:id="b2655394-6a68-4f81-9d0e-9f043b9a7e0a" name="proc-site-api-success-update-test" tags="UPDATE DIMENSION">
		<munit:behavior>
			<munit-tools:mock-when doc:id="0d62338a-957e-41e9-b01c-febf9a789562" doc:name="Mock GET /sys-sitetracker-api/site" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="GET /sys-sitetracker-api/site"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="060a84fb-1604-4995-990e-9c195603d540"/>
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload encoding="UTF-8" mediaType="application/json" value="#[MunitTools::getResourceAsString('sample_data/get-site-response.json')]"/>
				</munit-tools:then-return>
			
</munit-tools:mock-when>
			<munit-tools:mock-when doc:id="59134b5f-5d28-40ec-b962-fa2a74122555" doc:name="Mock GET /sys-business-central-api/dimension" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="GET /sys-business-central-api/dimension"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="b48635ed-9687-46d9-9dcf-14f9792fa722"/>
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload encoding="UTF-8" mediaType="application/json" value="#[MunitTools::getResourceAsString('sample_data/get-bc-response.json')]"/>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:id="bd74eb34-f0e8-43c4-a1ef-500de1f7b664" doc:name="Spy PATCH /sys-business-central-api/dimension" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="PATCH /sys-business-central-api/dimension"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="7c99f086-b0e3-49a8-8731-50e74b19b1a8"/>
				</munit-tools:with-attributes>
				<munit-tools:before-call>
					<munit-tools:assert-equals actual="#[payload]" doc:id="cac1455b-7112-4fa9-82c0-3e81f165ec75" doc:name="Assert equals" expected="#[readUrl('classpath://sample_data/patch-bc-request.json', &quot;application/json&quot;)]"/>
				</munit-tools:before-call>
			</munit-tools:spy>
			<munit-tools:mock-when doc:id="971417af-5111-48de-b48c-06adc0e30a3f" doc:name="Mock PATCH /sys-business-central-api/dimension" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="PATCH /sys-business-central-api/dimension"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="7c99f086-b0e3-49a8-8731-50e74b19b1a8"/>
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload encoding="UTF-8" mediaType="application/json" value="#[MunitTools::getResourceAsString('sample_data/patch-bc-response.json')]"/>
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution>
			<flow-ref doc:id="9847603a-f83c-46e1-86b8-c5724fa948f8" doc:name="Flow-ref to proc-site-api-flow" name="proc-site-api-flow"/>
		</munit:execution>
		<munit:validation>
			<munit-tools:verify-call atLeast="1" doc:id="55aa6627-5947-4fa0-a63e-1df842cabc4e" doc:name="Verify call GET /sys-sitetracker-api/site" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="GET /sys-sitetracker-api/site"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="060a84fb-1604-4995-990e-9c195603d540"/>
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call atLeast="1" doc:id="a530598b-a7ad-4359-b1ed-c7d30d58c639" doc:name="Verify call GET /sys-business-central-api/dimension" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="GET /sys-business-central-api/dimension"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="b48635ed-9687-46d9-9dcf-14f9792fa722"/>
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call atLeast="1" doc:id="27943828-c963-4e34-88ab-1c89e9448ac6" doc:name="Verify call PATCH /sys-business-central-api/dimension" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="PATCH /sys-business-central-api/dimension"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="7c99f086-b0e3-49a8-8731-50e74b19b1a8"/>
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test description="Creating a dimension from site" doc:id="53939934-a8d5-4d00-94e8-787d155847d5" name="proc-site-api-success-create-test" tags="CREATE DIMENSION">
		<munit:behavior>
			<munit-tools:mock-when doc:id="0a2892eb-9e2c-438e-8a70-1af4f8d170d6" doc:name="Mock GET /sys-sitetracker-api/site" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="GET /sys-sitetracker-api/site"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="060a84fb-1604-4995-990e-9c195603d540"/>
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload encoding="UTF-8" mediaType="application/json" value="#[MunitTools::getResourceAsString('sample_data/get-site-response.json')]"/>
				</munit-tools:then-return>
			
</munit-tools:mock-when>
			<munit-tools:mock-when doc:id="da769983-a922-402c-a060-121367da3d1a" doc:name="Mock GET /sys-business-central-api/dimension" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="GET /sys-business-central-api/dimension"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="b48635ed-9687-46d9-9dcf-14f9792fa722"/>
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload encoding="UTF-8" mediaType="application/json" value="#[MunitTools::getResourceAsString('sample_data/get-bc-response-empty.json')]"/>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:id="86e8cdb5-5440-4cb5-b2ad-9a13aeb53e27" doc:name="Spy POST /sys-business-central-api/dimension" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="POST /sys-business-central-api/dimension"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="1f741914-5f91-4adb-8462-465b7f61d373"/>
				</munit-tools:with-attributes>
				<munit-tools:before-call>
					<munit-tools:assert-equals actual="#[payload]" doc:id="749c2f6b-3a54-452b-9391-805ca8de7d01" doc:name="Assert equals" expected="#[readUrl('classpath://sample_data/post-bc-request.json', &quot;application/json&quot;)]"/>
				</munit-tools:before-call>
			</munit-tools:spy>
			<munit-tools:mock-when doc:id="fabb0313-3788-41f4-9f83-378abb944573" doc:name="Mock POST /sys-business-central-api/dimension" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="POST /sys-business-central-api/dimension"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="1f741914-5f91-4adb-8462-465b7f61d373"/>
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload encoding="UTF-8" mediaType="application/json" value="#[MunitTools::getResourceAsString('sample_data/post-bc-response.json')]"/>
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution>
			<flow-ref doc:id="ee9fd546-87d6-4490-bbe5-a16bc9492777" doc:name="Flow-ref to proc-site-api-flow" name="proc-site-api-flow"/>
		</munit:execution>
		<munit:validation>
			<munit-tools:verify-call atLeast="1" doc:id="6dbae786-0fe1-4e4c-ae89-9a02cc832b6f" doc:name="Verify call GET /sys-sitetracker-api/site" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="GET /sys-sitetracker-api/site"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="060a84fb-1604-4995-990e-9c195603d540"/>
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call atLeast="1" doc:id="9258b674-9bf6-42f6-8283-675306917794" doc:name="Verify call GET /sys-business-central-api/dimension" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="GET /sys-business-central-api/dimension"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="b48635ed-9687-46d9-9dcf-14f9792fa722"/>
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call atLeast="1" doc:id="4bff4d6d-e7f1-4d1a-b56c-07b41c9e2fe3" doc:name="Verify call POST /sys-business-central-api/dimension" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="POST /sys-business-central-api/dimension"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="1f741914-5f91-4adb-8462-465b7f61d373"/>
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="proc-site-api-no-activity-test" doc:id="d7100771-0589-4491-9ec1-ead7cc49d413" description="Checking if Site has data" tags="CREATE DIMENSION">
		<munit:behavior>
			<munit-tools:mock-when doc:id="34851e15-d775-4059-b6fd-eef711de1ec2" doc:name="Mock GET /sys-sitetracker-api/site" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="GET /sys-sitetracker-api/site" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="060a84fb-1604-4995-990e-9c195603d540" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[MunitTools::getResourceAsString('sample_data/get-site-empty-response.json')]" mediaType="application/json" encoding="UTF-8" />
				</munit-tools:then-return>
			
</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to proc-site-api-flow" doc:id="fba1763d-4905-4976-a348-440922098903" name="proc-site-api-flow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:verify-call doc:name="Verify call GET /sys-sitetracker-api/site" doc:id="18c7ef63-e388-4ff9-a6f1-d1bc2f316014" processor="http:request" atLeast="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="GET /sys-sitetracker-api/site" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="060a84fb-1604-4995-990e-9c195603d540" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
</mule>